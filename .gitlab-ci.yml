stages:
  - build
linux:
  stage: build
  tags:
    - qtdeploy
  variables:
    GIT_STRATEGY: clone
    GIT_SUBMODULE_STRATEGY: recursive
    GIT_SUBMODULE_FORCE_HTTPS: "true"
  script:
    - cmake -B build -S . -DCMAKE_PREFIX_PATH=${CI_QT_PATH}:$CMAKE_PREFIX_PATH
    - cmake --build build
    - cp -r ./build/lib ./build/stplot-gui/
  artifacts:
    paths:
      - ./build/stplot-gui/lib/*
      - ./build/stplot-gui/stplot-gui
      - ./build/stplot-gui/plugins
    expire_in: 1 week
